---
import Layout from '../layouts/Layout.astro';

// This page is statically pre-rendered at build time
export const prerender = true;

const buildTime = new Date().toISOString();
const randomNumber = Math.floor(Math.random() * 1000);

// Simulate fetching data at build time
const mockApiData = {
	users: [
		{ id: 1, name: 'Alice Johnson', role: 'Developer' },
		{ id: 2, name: 'Bob Smith', role: 'Designer' },
		{ id: 3, name: 'Carol Davis', role: 'Manager' }
	],
	stats: {
		totalUsers: 3,
		activeProjects: 12,
		completedTasks: 156
	}
};
---

<Layout title="Static Pre-rendered Page">
	<main>
		<h1>üìÑ Static Pre-rendered Page</h1>
		<p>This page is statically pre-rendered at build time using: 
			<code id = "codeBlock">export const prerender = true;</code></p>
		
		<div class="info-box">
			<h2>‚ÑπÔ∏è Information</h2>
			<p><strong>Build Time:</strong> {buildTime} (Only changes at npm run build)</p>
			<p><strong>Rendering Mode:</strong> Prerendering/Static Site Generation (SSG)</p>
			<p><strong>When Generated:</strong> At build time</p>
			<p><strong>Performance:</strong> Fastest - served as static HTML (All client-side JavaScript is automatically stripped out)</p>
		</div>

		<div class="build-info">
			<h2>üìä Build Information</h2>
			<p><strong>Generated at:</strong> {buildTime}</p>
			<p><strong>Random build number:</strong> {randomNumber}</p>
			<p><strong>Rendering mode:</strong> Static Site Generation (SSG)</p>
		</div>
		
		<div class="data-section">
			<h2>üë• Mock Data (Fetched at Build Time)</h2>
			<div class="stats-grid">
				<div class="stat-card">
					<h3>Total Users</h3>
					<div class="stat-number">{mockApiData.stats.totalUsers}</div>
				</div>
				<div class="stat-card">
					<h3>Active Projects</h3>
					<div class="stat-number">{mockApiData.stats.activeProjects}</div>
				</div>
				<div class="stat-card">
					<h3>Completed Tasks</h3>
					<div class="stat-number">{mockApiData.stats.completedTasks}</div>
				</div>
			</div>
			
			<div class="users-list">
				<h3>Team Members</h3>
				<ul>
					{mockApiData.users.map(user => (
						<li>
							<strong>{user.name}</strong> - {user.role}
						</li>
					))}
				</ul>
			</div>
		</div>
		
		<div class="info-box">
			<h2>‚ÑπÔ∏è SSG Characteristics</h2>
			<ul>
				<li><strong>Pre-rendered:</strong> HTML generated at build time</li>
				<li><strong>Fast loading:</strong> Served as static files</li>
				<li><strong>SEO friendly:</strong> Content available to crawlers</li>
				<li><strong>CDN cacheable:</strong> Can be cached globally</li>
				<li><strong>Build-time data:</strong> Data fetched during build process</li>
				<li><strong>No server required:</strong> Can be hosted on static file servers</li>
			</ul>
		</div>
		
		<div class="note">
			<p><strong>Note:</strong> The build time and random number above will remain the same until you rebuild the site, demonstrating that this content is static.</p>
		</div>
		
		<a href="/" class="back-link">‚Üê Back to Home</a>
	</main>
</Layout>

<style>
		main {
		margin: auto;
		padding: 1rem;
		width: 800px;
		max-width: calc(100% - 2rem);
		color: rgb(13, 2, 79);
		font-size: 20px;
		line-height: 1.6;
	}
	
	nav ul {
		list-style: none;
		padding: 0;
	}
	
	nav li {
		margin: 0.5rem 0;
	}
	
	nav a {
		color: #311d42;
		text-decoration: underline;
		padding: 0.5rem;
		border-radius: 4px;
		transition: background-color 0.3s;
	}
	
	nav a:hover {
		background-color: rgba(79, 57, 250, 0.1);
	}
	
	h1 {
		font-size: 4rem;
		font-weight: 700;
		line-height: 1;
		text-align: center;
		margin-bottom: 1em;
	}
	
	h2 {
		color: #000000;
	}

	#codeBlock {
		display: inline-block;
		border-radius: 1px;
		border: 1px solid transparent;
		padding: 6px 8px;
		background-color:#dadada;
		width: 100%;
	}
</style>
